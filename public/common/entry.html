<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">

<head>
    <!-- AsomeHeader Start -->
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <title>AsomeCode</title>
    <meta name="Robots" content="all" />
    <meta name="reply-to" content="" />
    <meta name="date" content="" />

    <link rel="stylesheet" href="./css/AsomeCODE.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/highlight.css">
    <link rel="stylesheet" href="./css/vs2015.css">

    <script src="./js/jquery-3.2.1.min.js"></script>

    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <script src="./js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="./css/jodit.min.css" />
    <link rel="stylesheet" href="./css/prism.css" />
    <script src="./js/jodit.min.js"></script>
    <script src="./js/prism.js"></script>

    <script src="./js/AsomeCODE-web.js"></script>
    <script src="./js/AsomeCodeCommand.js"></script>
    <script src="./js/AsomeCodeUpdate.js"></script>
    <script src="./js/board.js"></script>
    <script src="./js/board.js"></script>
    <script src="./js/highlight.pack.js"></script>
    <script src="./js/highlightjs-line-numbers.min.js"></script>

    <script src="./ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="./ace/ext-static_highlight.js" type="text/javascript" charset="utf-8"></script>
    <script src="./ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>

    <!-- AsomeHeader End -->
</head>

<body class="p3">

    <div class="modal fade" id="video_dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-body">
                    <video id="video_player" width="100%" controls>
                        <source id="video_src" type="video/webm" src="" />
                        <track id="video_subtitle" kind="subtitles" srclang="en" label="english" src="" default>
                        Your browser does not support HTML5 video.
                    </video>
                </div>
            </div>
        </div>
    </div>

    <div id="wrap">
        <ul class="blind">
            <li><a href="#contents">본문 바로가기(Skip Contents)</a></li>
        </ul>
        <div id="header">
            <ul class="left">
                <li><a href="javascript:void(0);" onclick="run_cmd('Code=AsomeCodeConnect')"><img
                            src="./images/top_01.png"></a></li>
                <li><a href="javascript:void(0);" onclick="run_cmd('Code=GoHome')"><img src="./images/top_02.png"></a>
                </li>
                <li><a href="javascript:void(0);" onclick="run_cmd('Code=ShowEditor')"><img
                            src="./images/top_03.png"></a></li>
                <li><a href="javascript:void(0);" onclick="run_cmd('Code=Stop')"><img src="./images/top_05.png"></a>
                </li>
            </ul>
            <ul class="right">
                <li><a href="javascript:void(0);" onclick="run_cmd('Code=AsomeCodeReboot')"><img
                            src="./images/top_04.png"></a></li>
                <li><a href="javascript:void(0);" onclick="run_cmd('Code=AsomeCodeFormat')"><img
                            src="./images/top_06.png"></a></li>
                <li><a href="javascript:void(0);" onclick="run_cmd('Code=AsomeCodeUpdate')"><img
                            src="./images/top_07.png"></a></li>
                <li><a href="../AsomeCode-Student/Korean/help_pin.html" target="help"><img src="./images/top_08.png"></a>
                </li>
            </ul>
        </div>
        <div id="mobile">
            <div class="logo">
                <a href="javascript:void(0);"><img src="./images/logom.png"></a>
                <div class="m"><a><img src="./images/mobile_m.png"></a></div>
            </div>
            <div class="mobile_top">
                <div class="top_m">
                    <a href="javascript:void(0);" onclick="run_cmd('Code=GoHome')"><img
                            src="./images/mobile_01.png"></a>
                    <a href="javascript:void(0);" onclick="run_cmd('Code=AsomeCodeConnect')"><img
                            src="./images/mobile_02.png"></a>
                    <a href="javascript:void(0);" onclick="run_cmd('Code=ShowEditor')"><img
                            src="./images/mobile_03.png"></a>
                    <a href="javascript:void(0);" onclick="run_cmd('Code=Stop')"><img src="./images/mobile_04.png"
                            class="last"></a>
                </div>
                <div class="top_m">
                    <a href="javascript:void(0);" onclick="run_cmd('Code=AsomeCodeReboot')"><img
                            src="./images/mobile_05.png"></a>
                    <a href="javascript:void(0);" onclick="run_cmd('Code=AsomeCodeFormat')"><img
                            src="./images/mobile_06.png"></a>
                    <a href="javascript:void(0);" onclick="run_cmd('Code=AsomeCodeUpdate')"><img
                            src="./images/mobile_07.png"></a>
                    <a href="../AsomeCode-Student/Korean/help_pin.html" target="help"><img src="./images/mobile_08.png"
                            class="last"></a>
                </div>
            </div>
        </div>
        <div class="mobile_nav3"></div>
        <div id="p3_header">
            <ul>
                <li class="headleft"><a href="javascript:void(0);" onclick="run_cmd('Code=GoHome')"><img src="./images/logo.png"></a></li>
                <li class="headright"></li>
            </ul>
        </div>

        <br>

        <div class="row">
            <div class="container main">
                <div class="col-sm-12">
                    <br>
                    <p class="main_text" style="color: red;">
                        어썸봇과 동글 테스트용 어썸보드 프로 모두 업데이트부터 하고 진행하세요.
                    </p>
                    <p class="main_text">
                        업데이트 방법 및 프로그램 다운로드 정보는 아래 링크를 클릭하세요.
                    </p>
                    <p class="main_text">
                        <a href="http://d2m12nm8hfaup4.cloudfront.net/asomebord-format/index.html" target="_blank">http://d2m12nm8hfaup4.cloudfront.net/asomebord-format/index.html</a>
                    </p>
                    <br><br>

                    <div class="title_no_video">
                        시리얼 번호 생성하기
                    </div>
                    <div class="col-sm-12">
                        <p class="main_text" style="color: red;">
                            연결하기 버튼을 클릭하면 시리얼 번호가 초기화되니 미리 복사해두고 사용하세요.
                            동글과 어썸봇에 같은 시리얼 번호로 초기화하여야 두 제품이 서로 통신하게 됩니다. 
                        </p>

                        <p class="main_text">
                            <button class="btn btn-primary" onclick="make_sn()">시리얼 번호 생성</button>
                        </p>

                        <p class="main_text">
                            <input type="text" id="sn" name="sn" class="form-control" placeholder="시리얼 번호">
                        </p>
                    </div>

                    <script>
                        function make_sn() {
                            var text = "";
                            var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
                            for (var i = 0; i < 10; i++)
                                text += possible.charAt(Math.floor(Math.random() * possible.length));
                            $("#sn").attr("value", text);
                        }
                    </script>
                </div>

                <div class="col-sm-12">
                    <br><br><br>
                </div>

                <div class="col-sm-12">
                    <div class="title_no_video">
                        동글 모듈에 프로그램 올리기
                    </div>
                    <div class="col-sm-12">
                        <p class="main_text">
                            <div class="content_image_box"><img class="content_image" src="./images/dongle_test.jpg">
                            </div>
                        </p>
                        <p class="main_text">
                            <ul>
                                <li>어썸보드 프로를 사용합니다.</li>
                                <li>11번 핀에 LED를 연결하면 어썸봇으로 WIFI가 연결되었을 때 불이 들어옵니다.</li>
                                <li>아래 버튼을 차례로 클릭해서 프로그램을 올리고 껐다 켠 후 엔트리에 연결합니다.</li>
                            </ul>
                        </p>

                        <div id="src_1" style="display: none;">code = """
import internet_control
import thread_socket
import thread_queue

internet_control.connect("{0}", "123456789a")
socket = thread_socket.create()
queue = thread_queue.create(16)

def on_socket_repeat():
    internet_control.update()
    if socket.is_empty():
        socket.send_text(queue.pop())

def on_socket_received(text):
    text = text.replace("'#I''D", "'#ID")
    if len(text) == 1:
        print("#UDP %s ###" % text)
    else:
        print(text)

def send_message(line):
    index = line.find("('")
    if index > -1:
        line = line[index+2:]
    index = line.find("', '")
    if index > -1:
        line = line[index+4:]
    line = line[:-2]
    socket.send_msg("192.168.4.2", 1234, line)
    socket.send_msg("192.168.4.3", 1234, line)
    socket.send_msg("192.168.4.4", 1234, line)
    socket.send_msg("192.168.4.5", 1234, line)

socket.setOnRepeat(on_socket_repeat)
socket.setOnReceived(on_socket_received)
socket.start(1234)

while True:
    line = input()
    if line == "q":
        socket.stop()
        break

    if "internet.send_msg" in line:
        send_message(line)

    queue.push(line)
"""

f = open("main.py", "w")
f.write(code)
f.close()
</div>

                        <script type="text/javascript">
                            function save_dongle_client() {
                                var text = String.format($("#src_1").text(), sn.value);
                                run_code(text);
                            }
                        </script>

                        <p class="main_text">
                            <button class="btn btn-primary"
                                onclick="run_cmd('Code=UploadAs/Filename=examples\\internet_control.py/As=internet_control.py')">internet_control
                                모듈 등록</button>
                        </p>

                        <p class="main_text">
                            <button class="btn btn-primary"
                                onclick="run_cmd('Code=UploadAs/Filename=examples\\thread_socket.py/As=thread_socket.py')">thread_socket
                                모듈 등록</button>
                        </p>

                        <p class="main_text">
                            <button class="btn btn-primary"
                                onclick="run_cmd('Code=UploadAs/Filename=examples\\thread_queue.py/As=thread_queue.py')">thread_queue
                                모듈 등록</button>
                        </p>

                        <p class="main_text">
                            <button class="btn btn-primary" onclick="save_dongle_client()">자동 프로그램 등록</button>
                        </p>
                    </div>
                </div>

                <div class="col-sm-12">
                    <br><br><br>
                </div>

                <div class="col-sm-12">
                    <div class="title_no_video">
                        어썸봇에 동글 접속 프로그램 올리기
                    </div>
                    <p class="main_text">
                        <ul>
                            <li>어썸봇에 아래 버튼을 차례로 클릭해서 프로그램을 올리고 껐다 켭니다.</li>
                        </ul>
                    </p>


<div id="src_2" style="display: none;">code = """
import network

def open():
    sta_if = network.WLAN(network.STA_IF)
    sta_if.active(False)
    ap = network.WLAN(network.AP_IF)
    ap.config(essid="{0}", authmode=network.AUTH_WPA_WPA2_PSK, password="123456789a")
    ap.active(True)
    sta_if = None
    ap = None
"""

f = open("open_ap.py", "w")
f.write(code)
f.close()
</div>

                    <script type="text/javascript">
                        function save_open_ap() {
                            var text = String.format($("#src_2").text(), sn.value);
                            run_code(text);
                        }
                    </script>

                    <p class="main_text">
                        <button class="btn btn-primary" onclick="save_open_ap()">open_ap 모듈 등록</button>
                    </p>

                    <p class="main_text">
                        <button class="btn btn-primary"
                            onclick="run_cmd('Code=UploadAs/Filename=examples\\dongle_server.py/As=main.py')">자동 프로그램
                            등록</button>
                    </p>
                </div>

                <div class="col-sm-12">
                    <br><br><br>
                </div>

                <div class="col-sm-12">
                    <div class="title_no_video">
                        자동 실행 프로그램 삭제
                    </div>
                    <p class="main_text">
                        어썸봇을 USB 케이블을 이용하여 엔트리에 연결하고 싶을 때에는, 아래 버튼을 클릭해서 자동 실행 프로그램을 삭제해야 합니다.
                    </p>
                    <p class="main_text">
                        <button class="btn btn-danger" onclick="run_text('import os; os.remove(\'main.py\')')">자동 실행
                            프로그램 삭제</button>
                    </p>
                </div>

                <div class="col-sm-12">
                    <br><br><br>
                </div>
            </div>

        </div>

</body>

</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">

<head>
<!-- AsomeHeader Start -->
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <title>AsomeCode</title>
    <meta name="Robots" content="all" />
    <meta name="reply-to" content="" />
    <meta name="date" content="" />

    <link rel="stylesheet" href="./css/AsomeCODE.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/highlight.css">
    <link rel="stylesheet" href="./css/vs2015.css">

    <script src="./js/jquery-3.2.1.min.js"></script>

    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <script src="./js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="./css/jodit.min.css"/>
    <link rel="stylesheet" href="./css/prism.css"/>
    <script src="./js/jodit.min.js"></script>
    <script src="./js/prism.js"></script>

    <script src="./js/AsomeCODE-web.js"></script>
    <script src="./js/AsomeCodeCommand.js"></script>
    <script src="./js/AsomeCodeUpdate.js"></script>
    <script src="./js/board.js"></script>
    <script src="./js/board.js"></script>
    <script src="./js/highlight.pack.js"></script>
    <script src="./js/highlightjs-line-numbers.min.js"></script>

    <script src="./ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="./ace/ext-static_highlight.js" type="text/javascript" charset="utf-8"></script>
    <script src="./ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
<!-- AsomeHeader End -->

    <link rel="stylesheet" href="./css/edit.css">
    <style>
        #editor {
            overflow: scroll !important;
            overflow-x: hidden !important;
            position: absolute;
            top: 38pt;
            right: 0;
            bottom: 0;
            left: 0;
        }
        #run_editor{
            position: relative;
            width: 70px;
        }
    </style>
</head>

<body scroll="no" style="background-color: gray; overflow: hidden;">

<div>
    <div class="btn-toolbar" role="toolbar" >
        <ul class="left">
                <li ><a href="javascript:void(0);" onclick="run_editor(editor)" id="run_editor">
                    <img class="image-btn" filename="./images/button_kor/top_10.png">
                    </a>
                </li>
                <li><a href="javascript:void(0);" onclick="run_cmd('Code=Stop')">
                    <img class="image-btn" filename="./images/button_kor/top_05.png">
                    </a>
                </li>
                <li><a href="javascript:void(0);" onclick="upload_editor()">
                    <img class="image-btn" filename="./images/button_kor/top_09.png">
                    </a>
                </li>

                <li><a href="javascript:void(0);" onclick="open_file()">
                    <img class="image-btn" filename="./images/button_kor/top_12.png">
                    </a>
                </li>

                <li><a href="javascript:void(0);" onclick="save_file()">
                    <img class="image-btn" filename="./images/button_kor/top_13.png">
                    </a>
                </li>
            </ul>
    </div> 
</div>

<div id="editor"></div>

</body>

<script>
    var editor = ace.edit("editor");
    window.onload = function() {
        editor.setValue( App.GetString("editor.text") );

        editor.setTheme("ace/theme/monokai");
        editor.setFontSize(14);
        editor.session.setMode("ace/mode/python");
        editor.setOptions({
            enableBasicAutocompletion: true,
            enableSnippets: true,
            enableLiveAutocompletion: true
        });

        editor.focus();
        editor.clearSelection();

        editor.completers.push({
            getCompletions: function (editor, session, pos, prefix, callback) {
                var completions = [];
                keywords.forEach(function (w) {
                    completions.push({
                        value: w,
                        meta: "AsomeIT",
                        score: 1000,
                    });
                });
                callback(null, completions);
            }
        });
    }

    function upload_editor() {
        App.SetString("editor.text", editor.getValue());
        run_cmd("Code=UploadEditor");
    }

    function save_text() {
        App.SetString("editor.text", editor.getValue());
    }

    function open_file_result(tag) {
        var filename = App.GetString(tag + ".filename");
        if (filename) {
            console.log(tag);
            console.log(App.GetString(tag + ".fullname"));
            console.log(filename);

            editor.setValue(App.GetString(tag + ".text"));
            editor.focus();
            editor.clearSelection();
        }
    }

    function open_file() {
        run_cmd('Code=OpenFile/Handler=open_file_result/Tag=editor/');
    }

    function save_file() {
        App.SetString("editor.text", editor.getValue());
        run_cmd('Code=SaveFile/Tag=editor/')
    }
</script>

</html>
